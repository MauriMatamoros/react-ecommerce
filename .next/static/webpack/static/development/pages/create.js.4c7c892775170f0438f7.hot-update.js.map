{"version":3,"file":"static/webpack/static/development/pages/create.js.4c7c892775170f0438f7.hot-update.js","sources":["webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/values.js","webpack:///./node_modules/core-js/library/fn/object/values.js","webpack:///./node_modules/core-js/library/modules/_object-to-array.js","webpack:///./node_modules/core-js/library/modules/es7.object.values.js","webpack:///./pages/create.js"],"sourcesContent":["module.exports = require(\"core-js/library/fn/object/values\");","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","import { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport {\n\tForm,\n\tInput,\n\tTextArea,\n\tButton,\n\tImage,\n\tMessage,\n\tHeader,\n\tIcon\n} from 'semantic-ui-react'\n\nimport baseUrl from '../utils/baseUrl'\n\nconst CreateProduct = () => {\n\tconst INITIAL_PRODUCT = {\n\t\tname: '',\n\t\tdescription: '',\n\t\tprice: '',\n\t\tmedia: ''\n\t}\n\tconst [product, setProduct] = useState(INITIAL_PRODUCT)\n\tconst [mediaPreview, setMediaPreview] = useState('')\n\tconst [success, setSuccess] = useState(false)\n\tconst [loading, setLoading] = useState(false)\n\tconst [disabled, setDisabled] = useState(true)\n\n\tuseEffect(() => {\n\t\tObject.values(product).every((element) => Boolean(element))\n\t}, [product])\n\n\tconst handleChange = (e) => {\n\t\tconst { name, value, files } = e.target\n\t\tif (name === 'media') {\n\t\t\tsetProduct((prevState) => ({ ...prevState, media: files[0] }))\n\t\t\tsetMediaPreview(window.URL.createObjectURL(files[0]))\n\t\t} else {\n\t\t\tsetProduct((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\t[name]: value\n\t\t\t}))\n\t\t}\n\t}\n\t//refactor image upload to the server\n\tconst handleImageUpload = async () => {\n\t\tconst data = new FormData()\n\t\tdata.append('file', product.media)\n\t\tdata.append('upload_preset', 'reactreserve')\n\t\tdata.append('cloud_name', 'mmatamoros')\n\t\tconst {\n\t\t\tdata: { url: mediaUrl }\n\t\t} = await axios.post(process.env.CLOUDINARY_URL, data)\n\t\treturn mediaUrl\n\t}\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault()\n\t\tsetLoading(true)\n\t\tconst mediaUrl = await handleImageUpload()\n\t\tconst url = `${baseUrl}/api/product`\n\t\tconst { name, price, description } = product\n\t\tconst payload = { name, price, description, mediaUrl }\n\t\tconst { data } = await axios.post(url, payload)\n\t\tconsole.log({ data })\n\t\tsetLoading(false)\n\t\tsetProduct(INITIAL_PRODUCT)\n\t\tsetSuccess(true)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Header as='h2' block>\n\t\t\t\t<Icon name='add' color='orange' />\n\t\t\t\tCreate New Product\n\t\t\t</Header>\n\t\t\t<Form loading={loading} onSubmit={handleSubmit} success={success}>\n\t\t\t\t<Message\n\t\t\t\t\tsuccess\n\t\t\t\t\ticon='check'\n\t\t\t\t\theader='Success!'\n\t\t\t\t\tcontent='Your product has been posted.'\n\t\t\t\t/>\n\t\t\t\t<Form.Group widths='equal'>\n\t\t\t\t\t<Form.Field\n\t\t\t\t\t\tcontrol={Input}\n\t\t\t\t\t\tname='name'\n\t\t\t\t\t\tlabel='Name'\n\t\t\t\t\t\tplaceholder='Name'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tvalue={product.name}\n\t\t\t\t\t/>\n\t\t\t\t\t<Form.Field\n\t\t\t\t\t\tcontrol={Input}\n\t\t\t\t\t\tname='price'\n\t\t\t\t\t\tlabel='Price'\n\t\t\t\t\t\tplaceholder='Price'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tmin='0.00'\n\t\t\t\t\t\tstep='0.01'\n\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tvalue={product.price}\n\t\t\t\t\t/>\n\t\t\t\t\t<Form.Field\n\t\t\t\t\t\tcontrol={Input}\n\t\t\t\t\t\tname='media'\n\t\t\t\t\t\tlabel='Media'\n\t\t\t\t\t\tcontent='Select Image'\n\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\taccept='image/*'\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Image src={mediaPreview} rounded centered size='small' />\n\t\t\t\t<Form.Field\n\t\t\t\t\tcontrol={TextArea}\n\t\t\t\t\tname='description'\n\t\t\t\t\tlabel='Description'\n\t\t\t\t\tplaceholder='Description'\n\t\t\t\t\ttype='text'\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tvalue={product.description}\n\t\t\t\t/>\n\t\t\t\t<Form.Field\n\t\t\t\t\tcontrol={Button}\n\t\t\t\t\tcolor='blue'\n\t\t\t\t\ticon='pencil alternate'\n\t\t\t\t\tcontent='Submit'\n\t\t\t\t\ttype='submit'\n\t\t\t\t\tdisabled={disabled || loading}\n\t\t\t\t/>\n\t\t\t</Form>\n\t\t</>\n\t)\n}\n\nexport default CreateProduct\n"],"mappings":";;;;;;;;;AAAA;;;;;;;;;;;ACAA;AACA;;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRA;AACA;AACA;AAWA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAYA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AACA;AADA;AAAA;AAMA;AANA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AAAA;AACA;AADA;AAAA;AAOA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAaA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;;;;A","sourceRoot":""}